---
layout: post
title: Handling JSON in bash using underscore
date: '2014-01-16T10:54:00.001-05:00'
author: Alberto
tags:
- Bash
- JSON
- Node
modified_time: '2014-01-16T10:58:13.120-05:00'
blogger_id: tag:blogger.com,1999:blog-4831432806087932521.post-5509438756666617672
blogger_orig_url: https://alberto-flores.blogspot.com/2014/01/handling-json-in-bash-using-underscore.html
---

Now on days, software components expose some sort of API using a REST interface. In addition, the typical response comes in JSON format. While this very convenient for a browser to interpret, using JSON in a bash script is not as simple. I came across this project on github called <a href="https://github.com/ddopson/underscore-cli" target="_blank">underscore</a> and I must admit I liked it. I highly recommend reading it's short README file. I figured I'd write some about my issues installing it.<br /><a name='more'></a><br />Underscore is a&nbsp;<a href="http://nodejs.org/" target="_blank">node.js</a> solution (no surprise there). I have been a fan of node.js for sometime now, in particular for how you can get things done in my bash scripts. Installing underscore on Linux was not a problem at all (I tried my install on an Ubuntu VM). Once you have all the dependencies installed, there was no problem. <br /><br />Installing it on a MAC OSX was a different issue. I detected a problem with the <i>msgpack</i> feature. In MAC OSX, brew did most of the work to install node, but doing something:<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; npm install -g underscore-cli</span><br /><br />I got the following:<br /><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&gt; msgpack@0.2.1 install /usr/local/lib/node_modules/underscore-cli/node_modules/msgpack</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&gt; node-gyp rebuild</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br /></span></span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp http GET http://nodejs.org/dist/v0.10.24/node-v0.10.24.tar.gz</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp http 200 http://nodejs.org/dist/v0.10.24/node-v0.10.24.tar.gz</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">xcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br /></span></span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp: Error 1 running xcodebuild</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! configure error </span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! stack Error: `gyp` failed with exit code: 1</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! stack&nbsp;&nbsp;&nbsp;&nbsp; at ChildProcess.onCpExit (/usr/local/Cellar/node/0.10.24/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:337:16)</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! stack&nbsp;&nbsp;&nbsp;&nbsp; at ChildProcess.EventEmitter.emit (events.js:98:17)</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! stack&nbsp;&nbsp;&nbsp;&nbsp; at Process.ChildProcess._handle.onexit (child_process.js:789:12)</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! System Darwin 13.0.2</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! command "node" "/usr/local/Cellar/node/0.10.24/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! cwd /usr/local/lib/node_modules/underscore-cli/node_modules/msgpack</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! node -v v0.10.24</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! node-gyp -v v0.12.1</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">gyp ERR! not ok </span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">npm WARN optional dep failed, continuing msgpack@0.2.1</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/usr/local/bin/underscore -&gt; /usr/local/lib/node_modules/underscore-cli/bin/underscore</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">underscore-cli@0.2.17 /usr/local/lib/node_modules/underscore-cli</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">├── commander@2.1.0</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">├── underscore@1.5.2</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">├── coffee-script@1.6.3</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">├── underscore.string@2.3.3</span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">└── JSONSelect@0.4.0</span></span><br /><br />My fix: Install XCode. Once installed (free 2GB download), this problem disappeared.