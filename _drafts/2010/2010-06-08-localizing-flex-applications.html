---
layout: post
title: Localizing Flex Applications
date: '2010-06-08T13:49:00.000-04:00'
author: Alberto
tags:
- Flex
modified_time: '2010-06-08T13:49:10.693-04:00'
blogger_id: tag:blogger.com,1999:blog-4831432806087932521.post-8241735544702599270
blogger_orig_url: https://alberto-flores.blogspot.com/2010/06/localizing-flex-applications.html
---

In my attempt to localize my flex application, it quickly became evident how simple it is to do basic localization in flex. As soon as I tried to implement more complex features, I realized how complicated it can become (e.g. add special characters, support multiple locales, flex builder problems, etc). In the interest of sharing the wealth, I'll describe the steps I took, so I don't have to keep on repeating some of these in future development efforts. These steps are:<br /><a name='more'></a><br /><ul><li>Trade-offs between <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">@Resource</span></span> and <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">ResourceManager</span></span></li><li>Configuration of resource bundles following the flex convention.&nbsp;</li><li>Adding it to the source path (not necessarily overlapping).</li><li>Flex Framework compilation (usage of copylocale)</li><li>Problems with FlexBuilder proper compilation of multiple&nbsp;</li><li>Special characters within resource bundles (ISO-8859-1 vs UTF-8)</li></ul><div><b><br /></b><br /><b>Understanding the Tradeoffs <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">@Resource</span></span> and <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">ResourceManager</span></span></b></div><div><span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">@Resource</span></span> and <span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">ResourceManager</span></span> and basically the two ways to retrieve localized messages. The choice of either of these depends on the design and requirements of your application. I would imagine that if I have to do a "<i>quick</i>" prototype, the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">@Resource</span></span>&nbsp;component is the way to go (although one can argue the need of localization during early prototyping). &nbsp;In constrast, the <span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">ResourceManager</span></span>&nbsp;component provides a far more flexible way to configure the resolution of your bundles as well as the locale to be used to fetch all messages. One other caveat is that if you need to localize a <span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">.as</span></span> file, then you are pretty much stucked with the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">ResourceManager</span></span> object. Nothing bad, simply more configuration to add to your source code (with the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">ResourceBundle</span></span> metadata tag). I have found that <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">ResourceManager</span></span> provides a far better approach to localization and will have to have a very good reason to use <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">@Resource</span></span>.</div><div><br /></div><div><b>Configuring all resource bundles</b></div><div>All resource bundles (for those of you who are Java Developers) would be of &nbsp;the form <bundle-name><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">.properties</span></span>. The flex convention is that it should be in a directory named after the locale name. This is different than traditional Java conventions where the locale is part of the bundle name. The compiler flags can then use the token <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">{locale</span></span><span class="Apple-style-span" style="font-size: small;">}</span> anywhere to denote the locale directory of choice.</bundle-name></div><div><b><span class="Apple-style-span" style="font-weight: normal;"><br /></span></b></div><div><b>Dealing with the source path</b></div><div>In most configurations I've seen, there's a need to have the compiler flag:</div><div><pre style="background-color: #f0f7fe; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(204, 204, 204); border-top-style: solid; border-top-width: 1px; color: #333333; font-family: 'Courier New', Courier, monospace; font-size: 13px; overflow-x: auto; overflow-y: auto; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; padding-top: 5px; width: 500px;">-allow-source-path-overlap=true</pre>This is not&nbsp;necessarily&nbsp;true. This should be done if the directory containing the folder with the locale exists in the same directory where the source code to be compiled resides. FlexBuilder (as well as FlexMojos) provides the ability to add additional source paths which will allow you to compile just fine.<br /><b><span class="Apple-style-span" style="font-weight: normal;"><br /></span></b></div><div><b>Flex Framework localization</b></div><div>In case this is your first time localizing an application in your development environment, you will need to do an extra step to properly run your application locally. There is a nifty tool called <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">copylocale </span></span>which basically allows you to generate a locale for the flex framework in the language of your choice (as long as its supported by the tool). The syntax is something like:<br /><pre style="background-color: #f0f7fe; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(204, 204, 204); border-top-style: solid; border-top-width: 1px; color: #333333; font-family: 'Courier New', Courier, monospace; font-size: 13px; overflow-x: auto; overflow-y: auto; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; padding-top: 5px; width: 500px;">copylocale en_US destination_locale_name</pre>So, in order to prepare your flex environment to use Spanish (Spain), you would have to do:<br /><pre style="background-color: #f0f7fe; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(204, 204, 204); border-top-style: solid; border-top-width: 1px; color: #333333; font-family: 'Courier New', Courier, monospace; font-size: 13px; overflow-x: auto; overflow-y: auto; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; padding-top: 5px; width: 500px;">copylocale en_US es_ES</pre></div><div>Upon successful execution, you should see a new directory in the frameworks/locale directory with the name <span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">es_ES</span></span><br /><br /></div><div><b>Problems with Flex Builder</b></div><div>Everywhere in the documentation it suggested to do the following (including FlexBuilder)<br /><pre style="background-color: #f0f7fe; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(204, 204, 204); border-top-style: solid; border-top-width: 1px; color: #333333; font-family: 'Courier New', Courier, monospace; font-size: 13px; overflow-x: auto; overflow-y: auto; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; padding-top: 5px; width: 500px;">-locale=en_US,es_ES</pre></div><div>This didn't work for me in FlexBuilder. I tried the following:<br /><pre style="background-color: #f0f7fe; border-bottom-color: rgb(204, 204, 204); border-bottom-style: solid; border-bottom-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; border-left-width: 1px; border-right-color: rgb(204, 204, 204); border-right-style: solid; border-right-width: 1px; border-top-color: rgb(204, 204, 204); border-top-style: solid; border-top-width: 1px; color: #333333; font-family: 'Courier New', Courier, monospace; font-size: 13px; overflow-x: auto; overflow-y: auto; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; padding-top: 5px; width: 500px;">-locale=en_US es_ES</pre>(notice the white space instead of the comma between locale names) and it worked fine. Flexmojos had a different configuration.<br /><br /></div><div><b>Special Characters</b></div><div>Regarding special characters, my main problem was to ensure that all file encoding to be <span class="Apple-style-span" style="font-size: small;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">UTF-8</span></span> (the default is &nbsp;<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: small;">ISO-8859-1</span></span>). This is bad if you try to use the escape sequence characters in flex to add special characters. Once you configure file encoding in FlexBuilder (Preferences &gt; General &gt; Workspace), you are good to go. I copied and pasted the proper translation from Google translate. It worked very well (at least for me).</div><div><br /></div><div>Hope this helps!<br /><br /></div>