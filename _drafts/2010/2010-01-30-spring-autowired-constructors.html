---
layout: post
title: 'Spring: @Autowired Constructors'
date: '2010-01-30T00:38:00.002-05:00'
author: Alberto
tags:
- AOP
- Spring-AOP
- STS
- Spring
modified_time: '2010-01-31T10:45:16.581-05:00'
blogger_id: tag:blogger.com,1999:blog-4831432806087932521.post-3433638286793097077
blogger_orig_url: https://alberto-flores.blogspot.com/2010/01/spring-autowired-constructors.html
---

Since the introduction of Spring 2.0, I have seen a trend where developers use the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> annotation very often. I must admit, I like a combination of annotations with some XML declaration, however I'm still debating whether making a decision of using <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> scales well in the long run. I would like to show how this feature can seem unintuitive.&nbsp; Furthermore, even tools like SpringSource Tool Suite can get confused at times.<br /><a name='more'></a><br />Consider the following two POJOs:<br /><pre class="brush: java">public class FirstPojo implements Pojo {<br />  /**<br />   * Default constructor, no argument<br />   */<br />  public FirstPojo() {<br />  }<br />  // Other methods and logic here<br />}<br /><br />public class SecondPojo implements Pojo {<br />  /**<br />   * Default constructor, with one argument<br />   */<br />  @Autowired<br />  public SecondPojo(Pojo firstPojo) {<br />  }<br />  // Other methods and logic here<br />}<br /></pre>Notice that one contains a constructor which is annotated with <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired.</span> What this means is that you can potentially have the container define such a bean as follows:<br /><script class="brush: html" type="syntaxhighlighter"><![CDATA[ ... <bean id="pojo2"     class="SecondPojo"/>... ]]></script><br />Can you see the problem there? Now our declared XML claims that the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">SecondPojo</span> has a constructor with no parameters, even though we can clearly see that such is not the case. It's hard to explain the average user that such behavior is possible due to <i>Spring-AOP</i> and how these kind of beans are really proxy objects.&nbsp; When the container detects an <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> constructor, the <i>Spring-AOP</i> infrastructure ensures that such constructor exists (so as to execute whatever logic is within that constructor). Also note that all dependencies are also <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Required</span> (as per the <a href="http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/beans/factory/annotation/Autowired.html">docs</a>).&nbsp; Furthermore, it looks like the <i>SpringSource Tool Suite</i> (as of the writing of this entry) also has problems detecting this "feature" as normal behavior.&nbsp; See JIRA issue <a href="http://jira.springframework.org/browse/IDE-1042">IDE-1042</a> for more information (looks like it's planned to be fixed on the soon to be 2.3.1 release).<br /><br />Now, my personal feeling is that this <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> behavior is due to the mixing of declarative XML with annotations. Not necessarily a bad design from SpringSource, but simply a consequence of Spring's goal of helping with simplicity. <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> is really simple to use, but without full understanding of what's really happening, it can be confusing in the long term, particularly when a project grows in the number of managed beans. A good strategy (mostly maintained through the discipline of code reviews) is to choose this <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> constructors to also be detected with yet another annotation (e.g. <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Component</span>, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Service</span>, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Repository</span>, etc).&nbsp; If a bean already has an <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">@Autowired</span> constructor, it only makes sense to continue annotating the class (at the class level of course) with one of these stereotypes annotations so as to make it very clear how this beans is to work and how it's dependencies be injected. Interestingly enough, <i>SpringSource Tool Suite</i> seems to like this approach and can even graph it nicely.